<div class="wrapper  m-1 position-relative">
  <div size="" accent="info" class="bg-none px-1">
    <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
      <div class="symptom-head">
        <span>Consultations</span>
      </div>
      <button type="button" class="btn btn-primary button d-none" mat-raised-button>
        + Add New
      </button>
    </div>
    <div class="bg-white  table-top box-view">
      <div class="row m-0 p-0 pt-2 px-2">
        <div class="col-12 col-sm col-md col-lg mb-1">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Form Date</p>
              <div class="input-group">
                <input type="date" name="from" [(ngModel)]="from" max="{{max}}" class="form-control inthight"
                  id="inlineFormInputGroupUsername2" value="16-08-2020" style="font-size: 12px; box-shadow: none;">
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col col-sm col-md col-lg mb-1">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">To Date</p>
              <div class="input-group">
                <input type="date" [(ngModel)]="to" name="to" max="{{max}}" class="form-control inthight"
                  id="inlineFormInputGroupUsername2" aria-valuenow="23-08-2020" style="font-size: 12px; box-shadow: none;">
              </div>
            </div>
          </div>
        </div>

        <div class="mb-1 col-12 col-sm col-md col-lg">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Status </p>
              <div class="input-group">
                <select class="custom-select inthight" [(ngModel)]="appointment_status" id="inputGroupSelect01 placeholder"
                  style="font-size: 12px; box-shadow: none;">
                  <option selected value="selectall">Select All</option>
                  <option selected value="pending">Pending</option>
                  <option value="completed">Completed</option>
                  <option value="canceled">Canceled</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row m-0 p-0  px-2">
        <div class="col-12 col-sm col-md col-lg mb-1" *ngIf="accestype != 'doctor'">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Doctor</p>
              <div class="input-group">
                
                <!-- <select [(ngModel)]="selectedDoctor" class="custom-select" id="inputGroupSelect01"
                  style="font-size: 12px;">

                  <option *ngFor="let doctor of doctorlist">
                    {{doctor.name.first}}
                  </option>
                </select> -->
                <mat-form-field style="width:100%; font-size: 12px; box-shadow: none;">
                  <mat-select [formControl]="bankCtrl" placeholder="" #singleSelect>
                    <mat-option>
                      <ngx-mat-select-search placeholderLabel="Type Doctor Name" noEntriesFoundLabel="No matching doctor" [formControl]="bankFilterCtrl"></ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let bank of filteredBanks | async" [value]="bank">
                      {{bank.name.first}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 mb-1 col col-sm col-md col-lg">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">State</p>
              <mat-form-field style="width:100%; font-size: 12px; box-shadow: none;">
                <mat-select [formControl]="bankCtrl3" placeholder="" #singleSelect>
                  <mat-option>
                    <ngx-mat-select-search placeholderLabel="Enter pin code" noEntriesFoundLabel="No matching pin"[formControl]="bankFilterCtrl3"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let bank3 of filteredBanks3 | async" [value]="bank3">
                    {{bank3.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="mb-1 col-12 col-sm col-md col-lg">
          <div class="column">
            <div class="card-body p-0">
              <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Pin code</p>
              <mat-form-field style="width:100%; font-size: 12px; box-shadow: none;">
                <mat-select [formControl]="bankCtrl2" placeholder="" #singleSelect>
                  <mat-option>
                    <ngx-mat-select-search placeholderLabel="Enter pin State" noEntriesFoundLabel="No matching state"[formControl]="bankFilterCtrl2"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let bank2 of filteredBanks2 | async" [value]="bank2">
                    {{bank2.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

      </div>
      <div class="row m-0 p-0  px-2">
        <div class="col-lg col-md col-sm col-12 mb-1">
          <div class="column">
            <div class="card-body p-0">
              <button type="submit" class="btn btn-primary btn-sm  
              float-right" (click)="appointmentcount()">Submit</button>
            </div>
          </div>
        </div>
      </div>
      <div class="column px-2">
        <div class="d-flex justyfy-content-end aligin-items-center float-right">
          <div id="custom-search-input ">
            <div class="input-group col-md-12 mt-2 mb-2">
              <input type="text" class="  
              search-query form-control" (keyup)="doFilter($event.target.value)" placeholder="Search"
                style="font-size: 12px;" />
              <span class="input-group-btn btn btn-primary btn-search">
                <i class="fas fa-search" aria-hidden="true"></i>
              </span>
            </div>
          </div>
        </div><!-- (keyup)="doFilter($event.target.value)" -->
      </div>
      <div class="col col-lg col-md col-sm m-0 p-0 d-flex justify-content-center align-items-center table-scroll">
        <table mat-table [dataSource]="dataSource" matSort class="table-view">
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Sl.No. </th>
            <td mat-cell *matCellDef="let element; let i=index;"> {{element._id}} </td>
          </ng-container>
          <ng-container matColumnDef="RefID">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Ref ID </th>
            <td mat-cell *matCellDef="let element">{{element.appointment_id}}</td>
          </ng-container>
          <ng-container matColumnDef="DoctorName">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Doctor Name </th>
            <td mat-cell *matCellDef="let element" (click)="showpopupnew(element, 'doctor')"
              style="color: cornflowerblue; cursor: pointer;" > <span *ngIf="element.appointment_doctordata">{{element.appointment_doctordata.doc_name}} </span></td>
          </ng-container>
          <ng-container matColumnDef="DateandTime">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Date and Time </th>
            <td mat-cell *matCellDef="let element">{{element.appointment_date}} {{element.appointment_time}}</td>
          </ng-container>
          <ng-container matColumnDef="ConsultationType">
            <th mat-header-cell *matHeaderCellDef class="table-head">Type </th>
            <td mat-cell *matCellDef="let element">
              <div class="consulttype material-icons {{element.appointment_status =='pending'?'selected':''}}" (click)="joinchannel(element)">
                {{avaliableMode[element.appointment_subtype]}}</div>
            </td>
          </ng-container>
          <ng-container matColumnDef="PatientName">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Patient Name </th>
            <td mat-cell *matCellDef="let element" (click)="showpopupnew(element, 'patient')"
              style="color: cornflowerblue; cursor: pointer;">{{element.appointment_patientdata.user_name}}</td>
          </ng-container>
          <ng-container matColumnDef="NeworFollowup">

            <th mat-header-cell *matHeaderCellDef class="tab le-head">New or Followup</th>
            <td mat-cell *matCellDef="let element">{{element.NeworFollowup | titlecase}}</td>
          </ng-container>
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Status </th>
            <td mat-cell *matCellDef="let element">
              <div class="btn  btn-sm {{cstatus[element.appointment_status]}}"
                style="padding: 2px 6px;font-size: 12px;">
                {{element.appointment_status | titlecase}}</div>
            </td>
          </ng-container>
          <ng-container matColumnDef="Description">
            <th mat-header-cell *matHeaderCellDef class="table-head"> Description </th>
            <td mat-cell *matCellDef="let element">{{element.appointment_desc | titlecase}}</td>
          </ng-container>
          <ng-container matColumnDef="Actions">
            <th mat-header-cell *matHeaderCellDef class="table-head">Action</th>
            <td mat-cell *matCellDef="let element">
              <span class="edit d-flex px-2">
                <div class="btn btn-success btn-sm mx-1" *ngIf="element.appointment_status == 'pending'"
                  style="padding: 2px 3px;font-size: 12px;background: #949494;border-color: #949494;"
                  (click)="showpopup(element)"> Update </div>
                <!-- <div class="btn btn-success btn-sm mx-1"
                  style="padding: 2px 3px;font-size: 12px;background: #949494;border-color: #949494;"
                  (click)="showpopup(element)" > Update/Cancel</div> -->
                <i class="fas fa-file-pdf  btn btn-secondary btn-xs mx-1" (click)="downloadpdf(element)"
                  aria-hidden="true" *ngIf="element.appointment_status == 'completed'"
                  style="font-size: 12px; padding: 5px 7px;"></i>

                <!-- <i class="fa fa-eye btn btn-success btn-xs mx-1 " aria-hidden="true" style="font-size: 12px; padding: 5px;"
                  (click)="viewconsultation(element)"></i> -->
                <i class="fa fa-eye btn btn-success btn-xs mx-1 " aria-hidden="true"
                  style="font-size: 12px; padding: 5px;" (click)="showpopupnew(element,'all')"></i>

                <!-- <i class="far fa-edit btn btn-primary btn-xs mx-1" aria-hidden="true"></i> -->
                <!-- <i class="fa fa-trash btn btn-danger btn-sm mx-1" aria-hidden="true"></i> -->
                <!-- <i class="far fa-edit btn btn-primary btn-xs mx-1" aria-hidden="true" 
                 style="font-size: 12px; padding: 5px;" (click)="showpopupnew(element,'all')"></i> -->
                <!--  <i class="fa fa-trash btn btn-danger btn-sm mx-1" aria-hidden="true">{{element.Actions.deletes}}</i> -->
              </span>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
      <!-- Angular pagination -->
      <mat-paginator [length]="100" [pageSize]="5" [pageSizeOptions]="[5, 10, 25, 100]">
      </mat-paginator>
    </div>
  </div>
</div>
<div class="popup {{popupstatus ?'pshow':''}}">
  <div class="centerbox">
    <div class="pclose" (click)="closepopup()"><i class="fa fa-times " style="font-size: 20px;"></i></div>
    <section class="mx-2 mb-2 mt-2">
      <div class="col d-flex justify-content-center align-items-center p-0 m-0">
        <h5 class="p-0 m-0 mb-2">Status Update</h5>
      </div>
      <div class="col text-center mx-3 mt-2 mb-2">
        <div class="form-check form-check-inline font-weight-bolder">
          <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="completed"
            (change)="changeconsultstatus($event)">
          <label class="form-check-label" for="inlineRadio1">
            Completed
          </label>
        </div>
        <div class="form-check form-check-inline font-weight-bolder">
          <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="cancelled"
            (change)="changeconsultstatus($event)">
          <label class="form-check-label" for="inlineRadio2">Canceled</label>
        </div>
      </div>
      <div class="col text-left px-3 mb-1 p-0 m-0">
        <p class="p-0 m-0 mb-2"><strong>Completed:</strong> Consultation was done with the patient will be taken to
          preescription page.</p>
        <p class="p-0 m-0 mb-2"><strong>Cancellation:</strong> Cancellation did not happen Appointment will be
          cancelled.</p>
      </div>
      <div class="col m-0 p-0 px-3 {{cancelreason ?'show':'hide'}}">
        <p class="p-0 m-0 mb-1">Reason for Cancellation</p>
        <textarea class="form-control m-0 mb-1 " ([ngModel])="appointment_cancelres" id="exampleInputEmail1"></textarea>
      </div>
    </section>
    <footer id="modal-footer" class="col-12 mb-2 d-flex justify-content-center align-items-center">
      <div class="col m-0 p-0 px-3 {{cancelreason ?'show':'hide'}}">

        <button type="button" class="btn btn-sm" (click)="cancelconsultation()" id="modal-action-button">
          Confirm
        </button>

      </div>
      <div class="col m-0 p-0 px-3  {{cancelreason ?'hide':'show'}}">

        <button type="button" class="btn btn-sm " (click)="updateconsultation()" id="modal-action-button">
          Confirm
        </button>
        <button type="button" class="btn btn-sm" id="modal-cancel-button" (click)="closepopup()">
          Cancel
        </button>
      </div>

      
    </footer>
  </div>
</div>

<div class="popup {{callstatus ?'pshow':''}}">
  <div class="centerbox">
    <div class="pclose" (click)="dontjoinagaoracall()"><i class="fa fa-times " style="font-size: 20px;"></i></div>
    <section class="mx-2 mb-2 mt-2">
      <div class="col d-flex justify-content-center align-items-center p-0 m-0">
        <h5 class="p-0 m-0 mb-2">Call Patient</h5>
      </div>
      <div class="col text-left px-3 mb-1 p-0 m-0">
        <p class="p-0 m-0 mb-2"><strong>Confirm:</strong>  Done with the patient will be taken to call to Doctor.</p>
        <p class="p-0 m-0 mb-2"><strong>Cancel:</strong>  Did not happen Call will be
          cancelled.</p>
      </div>
    </section>
    <footer id="modal-footer" class="col-12 mb-2 d-flex justify-content-center align-items-center">
     
      <div class="col m-0 p-0 px-3">

        <button type="button" class="btn btn-sm " (click)="joinagaoracall()" id="modal-action-button">
          Confirm
        </button>
        <button type="button" class="btn btn-sm" id="modal-cancel-button" (click)="dontjoinagaoracall()">
          Cancel
        </button>
      </div>

      
    </footer>
  </div>
</div>

<div class="popup {{popupstatusnew ?'pshow':''}}">

  <div class="centerboxedit">
    <div class="pclose" (click)="closepopupedit()"><i class="fa fa-times " style="font-size: 20px;"></i></div>
    <div class="centerboxview">
      
      <div class="row p-2">
        <div *ngIf="consultationshow" size="" accent="info" class="col-12 bg-none px-3"
          style="cursor: pointer; height: auto;">
          <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
            <div class="symptom-head">
              <span>Consultations</span>
            </div>
          </div>

          <div class=" bg-white  table-top box-view mb-1 pb-3">
            <div class="row m-0 p-0 pt-2 px-2">
              <div class="mb-1 col-12 col-sm col-md col-lg">
                <div class="column">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Ref. ID</p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.appointment_id}}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm col-md col-lg mb-1 ">
                <div class="column">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Type</p>
                    <div class="input-group">
                      <div class="input-group border-bottom rounded p-0">
                        <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.appointment_subtype | titlecase}}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mb-1 col col-sm col-md col-lg">
                <div class="column">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Appointment Date & Time </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.appointment_date}}
                        {{currentediting.appointment_time}}</p>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <div class="row m-0 p-0 px-2">
              <div class="col-12 col-sm col-md col-lg mb-1 ">
                <div class="column">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Status</p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0 text-right" style="font-size: 12px;">
                        <!-- <i class="fa fa-toggle-on " aria-hidden="true" style="color: #55ee6f; font-size: 16px;"></i> -->
                        {{currentediting.appointment_status | titlecase }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mb-1 col col-sm col-md col-lg">
                <div class="column">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Last Update Date </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0 text-right" style="font-size: 12px;">{{currentediting.updatedAt}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row p-0 m-0 px-4">
              <div class="mb-1 col-12 col-sm col-md col-lg">
                <div class="row">
                  <div class="card-body p-0">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Remarks </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0 text-left" style="font-size: 12px;">
                        {{currentediting.appointment_desc}}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row p-0 m-0 px-4">
              <div class="mb-1 col-12 col-sm col-md col-lg">
                <div class="row">
                  <div class="card-body p-0">
                    <p class="p-0 m-0" style="font-size: 14px; font-weight: 600;">Images / Documents Submitted </p>
                    <div class="input-group border-bottom rounded p-0">
                      <div>
                        <ul>
                          <li *ngFor="let file of petientdoc">
                            <p style="color: blue; font-size: 12px;" (click)="viewiamge(file.documentname)">
                              {{file.documentname}} </p>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div size="" *ngIf="consultationshow" accent="info" class="col-12 bg-none px-3" style="cursor: pointer;">
          <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
            <div class="symptom-head">
              <span>Doctor Details</span>
            </div>
          </div>

          <div class=" bg-white  table-top box-view">
            <div class="row">

              <div class="col-lg-3 col-md-3 col-sm-3 col-12 pt-2 pb-3 d-flex justify-content-center align-items-center">
                <div class="row">
                  <div class="col-12 text-center">
                    <!-- <img src="{{profilepicdoc}}" alt="doctor" style="width: 200px; height: 200px; padding: 5px; contain: content ;"> -->
                    <img src="{{profilepicdoc}}" alt="doctor"
                      style="width: 200px; height: 200px; padding: 5px; contain: content ;">

                  </div>
                  <div class="col-12  mb-1 d-flex justify-content-center align-items-center">
                    <div class="input-group p-0">
                      <h6 class="col p-0 m-0 text-center" style="font-size: 14px; font-weight: 600;">
                        {{currentediting.appointment_doctordata.doc_name}}</h6>
                    </div>
                  </div>
                  <div class="col-12 mb-1 d-flex justify-content-center align-items-center">
                    <div class="input-group text-center p-0">
                      <p class="col p-0 m-0 text-center" style="font-size: 12px;">{{degree}}</p>
                    </div>
                  </div>
                  <div class="col-12 mb-1 d-flex justify-content-center align-items-center">
                    <div class="input-group text-center p-0">
                      <p class="col p-0 m-0 text-center" style="font-size: 12px;">{{specialization}}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-9 col-md-9 col-sm-9 col-12">

                <div class="row p-2">
                  <div class="mb-1 col-12 col-sm col-md col-lg">
                    <div class="column">
                      <div class="card-body p-0">
                        <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">SMC No </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.appointment_doctordata.doc_smcregno}}
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-sm col-md col-lg mb-1 ">
                    <div class="column">
                      <div class="card-body p-0">
                        <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Contact No </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0" style="font-size: 12px;">
                            +91-{{currentediting.appointment_doctordata.doc_mobile}}</p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row p-2">
                  <div class="col-12 mb-1 col col-sm col-md col-lg">
                    <div class="column">
                      <div class="card-body p-0">
                        <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Clinic Name </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0" style="font-size: 12px;">Max Hospital</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 mb-1 col col-sm col-md col-lg">
                    <div class="column">
                      <div class="card-body p-0">
                        <p class="p-0 m-0" style="font-size: 14px; font-weight: 600;">Email ID </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0" style="font-size: 12px;">info@gmail.com</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row p-2">
                  <div class="col-12 mb-1 col col-sm col-md col-lg">
                    <div class="column">
                      <div class="card-body p-0">
                        <p class="p-0 m-0" style="font-size: 14px; font-weight: 600;">Address </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0" style="font-size: 12px;">Bangalore </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>

        <div size="" *ngIf="doctoview" accent="info" class="col-12 bg-none px-4 mt-4" style="cursor: pointer;">

          <nb-card accent="success">
            <!-- Profile Section -->
            <div class="row mx-2 my-1 d-flex justify-content-center align-items-center">
              <div class="col-lg-4 col-md-4 col-sm-4 col-12 mb-2 m-0 p-0">
                <div class="col d-flex justify-content-center align-items-center p-0">
                  <img src="{{profilepicdoc}}" alt="img" style="width: 100%; height: auto; background-size: contain;">
                </div>
              </div>
              <div class="col-lg-8 col-md-8 col-sm-8 col-12 mb-2 m-0 p-0 small-screen">
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center ">
                    <p class="col-3 m-0 p-0 text-left" style="font-size: 14px; font-weight: 600;">Name</p>
                    <h6 class="col-9 m-0 p-0 text-left" style="color: #4a8b4a; font-size: 12px;">
                      <strong>{{viewdoctordetails.name}}</strong></h6>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-start">
                    <p class="col-3 m-0 p-0 text-left" style="font-size: 14px; font-weight: 600;">Address</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f; font-size: 12px;">
                      {{viewdoctordetails.address}}</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">City</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">Bangalore</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">State</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">Karnataka</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Pin code</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">500037</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Date of Birth</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">{{viewdoctordetails.doc_dob}}</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Gender</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">{{viewdoctordetails.gender | titlecase }}</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Mobile No</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">+91-{{viewdoctordetails.mobile}} </p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Aadhaar No</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">{{viewdoctordetails.doc_aadhaar}}</p>
                  </div>
                </div>
                <div class="m-0 p-0 mb-1 small-screen-mobi">
                  <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                    <p class="col-3 m-0 p-0 text-left">Email Id</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">{{viewdoctordetails.email}}</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Profile Section -->
            <!-- Medi Details -->
            <div class="row mx-2 my-1 d-flex justify-content-center align-items-center">
              <div class="col-lg-12 col-md-12 col-sm-12 col-12 mb-2 m-0 p-0">
                <!-- <div class="col p-2 m-0 d-flex justify-content-start align-items-center border-bottom">
                    <p class="col-3 m-0 p-0">StateMC</p>
                    <p class="col-9 m-0 p-0 text-left" style="color: #7f837f;">--</p>
                  </div> -->
                <div class="col p-2 m-0 d-flex border-bottom rounded">
                  <p class="col-3 m-0 p-0">SMC No</p>
                  <p class="col-9 m-0 p-0 font-view" style="color: #7f837f;">{{viewdoctordetails.doc_smcregno}}</p>
                </div>
                <div class="col p-2 m-0 d-flex border-bottom rounded">
                  <p class="col-3 m-0 p-0">IMR No</p>
                  <p class="col-9 m-0 p-0 font-view" style="color: #7f837f;">{{viewdoctordetails.doc_imrno}} </p>
                </div>
                <div class="col p-2 m-0 d-flex border-bottom rounded">
                  <p class="col-3 m-0 p-0">Qualification</p>
                  <p class="col-9 m-0 p-0 font-view" style="color: #7f837f;">{{viewdoctordetails.degree}} </p>
                </div>
                <div class="col p-2 m-0 d-flex border-bottom rounded">
                  <p class="col-3 m-0 p-0">Specialization</p>
                  <p class="col-9 m-0 p-0 font-view" style="color: #7f837f;">{{viewdoctordetails.specializations | titlecase}}</p>
                </div>
                <div class="col p-2 m-0 d-flex border-bottom rounded">
                  <p class="col-3 m-0 p-0">Languages Spoken</p>
                  <p class="col-9 m-0 p-0 font-view" style="color: #7f837f;">{{viewdoctordetails.languages |  titlecase}}</p>
                </div>
              </div>
              <div class="row w-100 mb-2 m-0 p-0">
                <div class="col-12 p-2 m-0 border-bottom">
                  <p class="col-lg-3 col-md-3 col-sm-3 col-12 m-0 p-0 mb-1">Symptoms Treated</p>
                  <p class="col-lg-9 col-md-9 col-sm-9 col-12 p-0 m-0 " style="color: #7f837f;">
                    {{viewdoctordetails.symptoms | titlecase}}</p>
                </div>
                <div class="col-12 p-2 m-0 border-bottom">
                  <p class="col-lg-3 col-md-3 col-sm-3 col-12 m-0 p-0 mb-1">Short Brief</p>
                  <p class="col-lg-9 col-md-9 col-sm-9 col-12 p-0 m-0" style="color: #7f837f;">
                    {{viewdoctordetails.about | titlecase}}</p>
                </div>
                <div class="col-12 p-2 m-0 border-bottom">
                  <p class="col-lg-3 col-md-3 col-sm-3 col-12 m-0 p-0 mb-1">Achievements</p>
                  <p class="col-lg-9 col-md-9 col-sm-9 col-12 p-0 m-0" style="color: #7f837f;">
                    {{viewdoctordetails.doc_achievements | titlecase}} </p>
                </div>
              </div>
            </div>
            <!-- Medi Details -->
          </nb-card>
          <nb-card accent="success">
            <div class="col-12 mb-2 m-0 p-0">
              <div class="row p-0 m-0 p-2">
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">Clinic</p>
                  <p class="col p-0 m-0 mb-1 text-left">{{viewdoctordetails.isClinic}}</p>
                </div>
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">Clinic Name</p>
                  <p class="col p-0 m-0 mb-1 text-left">{{viewdoctordetails.doc_clinic_name}}</p>
                </div>
              </div>
            </div>
            <div class="col-12 mb-2 m-0 p-0">
              <div class="row p-0 m-0 p-2">
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">Map Location</p>
                  <p class="col p-0 m-0 mb-1 text-left">{{viewdoctordetails.doc_clinic_address}}</p>
                </div>
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">Clinic Address</p>
                  <p class="col p-0 m-0 mb-1 text-left">{{viewdoctordetails.doc_clinic_address}}</p>
                </div>
              </div>
            </div>
            <div class="col-12 mb-2 m-0 p-0">
              <div class="row p-0 m-0 p-2">
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">City</p>
                  <p class="col p-0 m-0 mb-1">Bangalore</p>
                </div>
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col m-0 p-0 mb-1">State</p>
                  <p class="col p-0 m-0 mb-1">Karnataka</p>
                </div>
                <div class="p-0 m-0 mb-1 col-lg col-md col-sm col-12 d-flex mx-1 border-bottom rounded">
                  <p class="col  m-0 p-0 mb-1">PIN</p>
                  <p class="col  p-0 m-0 mb-1">500056</p>
                </div>
              </div>
            </div>

            <div class="container">
              <p class="col-12">Consultation Timings:</p>
              <div *ngFor="let item of viewdoctordetails.slotDetails | keyvalue">
                <nb-card class="container p-0 m-0 mb-2">
                  <div class="row p-0 m-0 p-2">
                    <div class="col-lg col-md col-sm col-12 consultblock">
                      <div *ngFor="let day of days  ">
                        <div class="days {{ item.value.days.includes(day.fname)?'selected':''}} "
                          (click)="toggleconsult(day.fname,item.key,'days')">{{day.name}}</div>
                      </div>
                    </div>
                    <div class="col-lg col-md col-sm col-12 consultblock">
                      <span class="mx-1 consultinput">{{item.value.starttime}}</span>
                      <span class="mx-1 consultinput">{{item.value.endtime}}</span>
                    </div>
                    <div class="col-lg col-md col-sm col-12 consultblock">
                      <div *ngFor="let atype of appointmentType  ">
                        <div
                          class="consulttype material-icons {{ item.value.avaliableMode.includes(atype.name)?'selected':''}} "
                          (click)="toggleconsult(atype.name,item.key,'appointmentType')">{{atype.icon}}</div>
                      </div>
                    </div>
                  </div>
                </nb-card>
              </div>
            </div>
          </nb-card>
        </div>

        <div size="" *ngIf="consultationshow" accent="info" class="col-12 bg-none px-4 mt-4" style="cursor: pointer;">
          <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
            <div class="symptom-head">
              <span class="display-6">Patient Details</span>
            </div>
            <button type="button" class="btn btn-primary button d-none" mat-raised-button>
              + Add New
            </button>

          </div>

          <div class=" bg-white  table-top box-view">
            <div class="row">
              <div class="col-lg-3 col-md-3 col-sm-3 col-12 d-flex justify-content-center align-items-center">
                <img src="{{profilepic}}" alt="doctor"
                  style="width: 200px; height: 200px; padding: 5px; contain: content ;">
              </div>
              <div class="col-lg-9 col-md-9 col-sm-9 col-12">
                <div class="row">
                  <div class="col-12 col-sm col-md col-lg mb-1 " style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Name </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_name}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Gender </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_gender | titlecase}}</p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row">
                  <div class="mb-1 col-12 col-sm col-md col-lg" style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">DOB </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_dob}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-sm col-md col-lg mb-1 " style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Contact No </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">+91{{currentediting.appointment_patientdata.user_mobile}}</p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row">
                  <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Height </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_height}} Cms</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Weight </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_weight}}Kgs</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                    <div class="column">
                      <div class="card-body">
                        <p class=" mb-1 font-weight-bolder px-0 mt-2">Blood Group </p>
                        <div class="input-group border-bottom rounded p-0">
                          <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_bloodgroup}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                <div class="column">
                  <div class="card-body">
                    <p class=" mb-1 font-weight-bolder px-0 mt-2">Pre-existing Diseases </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_preexisting}}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                <div class="column">
                  <div class="card-body">
                    <p class=" mb-1 font-weight-bolder px-0 mt-2">Allergic To </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0">{{currentediting.appointment_patientdata.user_alergicto}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 mb-1 col col-sm col-md col-lg" style=" height: 5rem;">
                <div class="column">
                  <div class="card-body">
                    <p class=" mb-1 font-weight-bolder px-0 mt-2">Address</p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0">
                        {{currentediting.appointment_patientdata.user_address}}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div size="" *ngIf="patientview" accent="info" class="col-12 bg-none px-4 mt-4" style="cursor: pointer;">

          <div class="row m-0 p-0">
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 font-weight-bolder" style="color: #6b6a6a;">Nick Name</p>
              <div class="border-bottom rounded mb-1 m-0 p-0">
                <p class="p-0 m-0 px-1 py-2">{{nickname}}</p>
              </div>
            </div>
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 font-weight-bolder" style="color: #6b6a6a;">Gender</p>
              <div class="border-bottom rounded mb-1 m-0 p-0">
                <p class="p-0 m-0 px-1 py-2">{{patient_gender | titlecase}}</p>
              </div>
            </div>
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 font-weight-bolder" style="color: #6b6a6a;">Relationship with Self</p>
              <div class="border-bottom rounded mb-1 m-0 p-0">
                <p class="p-0 m-0 px-1 py-2">Self</p>
              </div>
            </div>
          </div>

          <div class="row m-0 p-0 border rounded mb-2">
            <div class="col-lg-4 col-md-4 col-sm-4 col-12 mb-2  m-0 p-0" style=" height: 321px;">
              <img src="{{profileimg}}" alt="img" style="width: 100%; height: 100%; background-size: contain;">
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-12 px-2 mb-2 m-0 small-screen">
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center ">
                  <p class="col-4 m-0 p-0 text-left">Name</p>
                  <p class="col-8 m-0 p-0 text-left"><strong>{{patient_name}}</strong></p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">Address</p>
                  <p class="col-8 m-0 p-0 text-left">{{address}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">City</p>
                  <p class="col-8 m-0 p-0 text-left">{{city}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">State</p>
                  <p class="col-8 m-0 p-0 text-left">{{state}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">Pin code</p>
                  <p class="col-8 m-0 p-0 text-left">{{pin}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">Date of Birth</p>
                  <p class="col-8 m-0 p-0 text-left">{{dob}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">Gender</p>
                  <p class="col-8 m-0 p-0 text-left">{{patient_gender | titlecase}}</p>
                </div>
              </div>
              <div class="m-0 p-0 mb-1">

                <div class="col p-2 m-0 d-flex justify-content-start align-items-center">
                  <p class="col-4 m-0 p-0 text-left">Mobile No</p>
                  <p class="col-8 m-0 p-0 text-left">+91- {{phnumber}}</p>
                </div>
              </div>
            </div>
          </div>

          <div class="row m-0 p-0">
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Aadhaar No</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{aadhaar}}</p>
              </div>
            </div>
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Email Id</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{email}}</p>
              </div>
            </div>
          </div>

          <div class="row m-0 p-0">
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Height</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{height}}cm</p>
              </div>
            </div>
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Weight</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{weight}} Kgs</p>
              </div>
            </div>
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Blood Group</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{blood_group}}</p>
              </div>
            </div>
          </div>

          <div class="row m-0 p-0">
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Pre-existing Illness</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{patient_predisease}}</p>
              </div>
            </div>
          </div>

          <div class="row m-0 p-0">
            <div class="col-12 col-lg col-md col-sm mb-2 m-0 p-0 mx-1">
              <p class="m-0 p-0 mb-1 text-left">Alergic to</p>
              <div class="p-0 m-0 mb-1 border-bottom rounded">
                <p class="p-0 m-0 px-1 py-2">{{patient_allergicto}}</p>
              </div>
            </div>
          </div>

        </div>

        <div size="" *ngIf="consultationshow" accent="info" class="col-12 bg-none px-4 mt-4" style="cursor: pointer;">
          <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
            <div class="symptom-head">
              <span class="display-6">Consultation Details</span>
            </div>
            <button type="button" class="btn btn-primary button d-none" mat-raised-button>
              + Add New
            </button>

          </div>

          <div class=" bg-white  table-top box-view">
            <div class="row">
              <div class="col-12 col-sm col-md col-lg  ">
                <div class="column">
                  <div class="card-body">
                    <p class=" mb-1 font-weight-bolder px-0 mt-2">Reported Symptoms and Illness Brief </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0">{{currentediting.appointment_desc}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-sm col-md col-lg ">
                <div class="column">
                  <div class="card-body">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Chief Complaints and Relevant Points
                      from History
                    </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.analysis}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 col-sm col-md col-lg ">
                <div class="column">
                  <div class="card-body">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Examination / Lab Findings</p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.observation}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 col-sm col-md col-lg ">
                <div class="column">
                  <div class="card-body">
                    <p class="m-0 p-0" style="font-size: 14px; font-weight: 600;">Diagnosis, Suggested Investigations
                      and Prescription
                    </p>
                    <div class="input-group border-bottom rounded p-0">
                      <p class="p-0 m-0" style="font-size: 12px;">{{currentediting.presciption}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>


          </div>
        </div>

      </div>
    </div>



  </div>
</div>
