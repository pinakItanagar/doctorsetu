<div class="wrapper  m-1 position-relative">
    <div class="d-flex flex-direction-row justify-content-between w-100 align-items-center head">
        <div class="symptom-head">
            <!-- <span>Consultation</span> -->
        </div>
        <button type="button" class="btn btn-success button btn-sm mt-3 mr-1" mat-raised-button (click)="showhidebox()">
            + Enroll New
        </button>
    </div>
    <div class="p-1 bg-white mt-1 rounded mb-2 px-2 box-view" [ngClass]="status ? 'show' : 'hide'">
        <div class="row">
        <nb-card class="container m-0 p-0">
        <div class="row p-0 m-0 p-2 mb-2">
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Doctor</p>
                
                <mat-form-field style="width:100%; font-size: 12px; margin-top: 5px; box-shadow: none;">
                    <mat-select [formControl]="bankCtrl" placeholder="" #singleSelect>
                      <mat-option>
                        <ngx-mat-select-search placeholderLabel="Type Doctor Name" noEntriesFoundLabel="No matching doctor"[formControl]="bankFilterCtrl"></ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let bank of filteredBanks | async" [value]="bank">
                        {{bank.name.first}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Consultation Fee</p>
                <p class="p-0 m-0 d-flex align-items-center mx-1">
                    
                        <input type="number" min="0" [(ngModel)]="doc_consultation_fee" placeholder="&#x20B9; 300 /-"
                        class="form-control m-0" id="exampleInputEmail1" style="font-size: 12px;">

                </p>
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Time Slot</p>
                <p class="p-0 m-0 d-flex align-items-center mx-1">
                    <!-- <input type="number" class="form-control m-0  mx-1 box-shadow-none" 
                        id="exampleInputEmail1" aria-describedby="emailHelp" value="30"
                        style=" font-size: 12px;"> -->
                        <input type="number" class="form-control m-0 p-0 text-center mx-1" 
                        [(ngModel)]="interval" id="exampleInputEmail1"
                          aria-describedby="emailHelp" value="30" style="width: 3rem; height: 1.5rem; font-size: 12px;">
                        <span> mins</span> 
                    <!-- <nb-select  
                        multiple  placeholder="30 mins"
                        style="width: 100%; max-width:90rem !important; font-size: 12px; height: 20px; max-height: 20px;">
                          <nb-option >
                            30 mins
                          </nb-option>
                        </nb-select> -->
                </p>
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 text-right mt-3">
                <button type="button" class="btn btn-secondary button btn-sm mt-3 mr-1" mat-raised-button
                    (click)="addconsultblock()">
                    + Add
                </button>
            </div>
        </div>
        <p class="col-12 mx-1 m-0 p-1 mb-2 mt-2" style="font-size: 14px; font-weight: 600; ">Consultation Timings:</p>
        <div *ngFor="let item of consultationlist | keyvalue" class="mx-2 mb-2">

            <nb-card class="container m-0 ">

                <div class="row" style="font-size: 12px;">
                    <div class="col-lg-4 col-md-4 col-sm-12 consultblock">
                        <div *ngFor="let day of days  ">
                            <div class="days {{ item.value.days.includes(day.fname)?'selected':''}} "
                                (click)="toggleconsult(day.fname,item.key,'days')">{{day.name}}</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12 consultblock">
                        <input type="time" class="form-control  consultinput" [(ngModel)]="item.value.startTime"
                            id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="10:00">
                        <input type="time" class="form-control consultinput" [(ngModel)]="item.value.endTime"
                            id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="22:00">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-12 consultblock">
                        <div *ngFor="let atype of avaliableMode  ">
                            <div class="consulttype  {{ item.value.avaliableMode.includes(atype.name)?'selected':''}} "
                                (click)="toggleconsult(atype.name,item.key,'avaliableMode')"><i
                                    class=" {{atype.icon}}"></i></div>
                        </div>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-12 consultblock">
                        <div class="consulttype material-icons delete" (click)="removeConfigBlock(item.key)">delete
                        </div>
                    </div>
                </div>


            </nb-card>
        </div>
    </nb-card>
        </div>
        <footer id="modal-footer " class="d-flex justify-content-end  mt-1">
            <button id="modal-action-button" class="btn btn-sm button_action" [disabled]="!consultationlist.config_0" type="button" (click)="enrollDoctor()">
                Enroll Doctor
            </button>
            <button class="btn btn-md button_cancel btn-sm" type="button" id="modal-cancel-button"
                (click)="showhidebox()">
                Cancel
            </button>
        </footer>
    </div>

    <div class="p-1 bg-white mt-1 rounded mb-2 px-2 box-view" [ngClass]="editstatus ? 'show' : 'hide'">
        <div class="row">
        <nb-card class="container m-0 p-0">
        <div class="row p-0 m-0 p-2 mb-2">
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Doctor</p>
                
                <!-- <mat-form-field style="width:100%; font-size: 12px; margin-top: 5px; box-shadow: none;"> -->
                    <!-- <mat-select [formControl]="bankCtrl" placeholder="" #singleSelect>
                      <mat-option>
                        <ngx-mat-select-search placeholderLabel="Type Doctor Name" noEntriesFoundLabel="No matching doctor"[formControl]="bankFilterCtrl"></ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let bank of filteredBanks | async" [value]="bank">
                        {{bank.name.first}}
                      </mat-option>
                    </mat-select> -->
                    {{edit_docname}}
                  <!-- </mat-form-field> -->
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Consultation Fee</p>
                <p class="p-0 m-0 d-flex align-items-center mx-1">
                    
                        <input type="number" min="0" [(ngModel)]="edit_doc_consultation_fee" placeholder="&#x20B9; 300 /-"
                        class="form-control m-0" id="exampleInputEmail1" style="font-size: 12px;">

                </p>
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 mb-2">
                <p class="m-0 p-0 mb-2 ml-1" style="font-size: 14px; font-weight: 600; ">Time Slot</p>
                <p class="p-0 m-0 d-flex align-items-center mx-1">
                    <!-- <input type="number" class="form-control m-0  mx-1 box-shadow-none" 
                        id="exampleInputEmail1" aria-describedby="emailHelp" value="30"
                        style=" font-size: 12px;"> -->
                        <input type="number" class="form-control m-0 p-0 text-center mx-1" 
                        [(ngModel)]="edit_interval" id="exampleInputEmail1"
                          aria-describedby="emailHelp"  style="width: 3rem; height: 1.5rem; font-size: 12px;">
                        <span> mins</span> 
                    <!-- <nb-select  
                        multiple  placeholder="30 mins"
                        style="width: 100%; max-width:90rem !important; font-size: 12px; height: 20px; max-height: 20px;">
                          <nb-option >
                            30 mins
                          </nb-option>
                        </nb-select> -->
                </p>
            </div>
            <div class="col-12 col-sm-12 col-md col-lg p-0 m-0 text-right mt-3">
                <button type="button" class="btn btn-secondary button btn-sm mt-3 mr-1" mat-raised-button
                    (click)="editaddconsultblock()">
                    + Add 
                </button>
            </div>
        </div>
        <p class="col-12 mx-1 m-0 p-1 mb-2 mt-2" style="font-size: 14px; font-weight: 600; ">Consultation Timings:</p>
        <div *ngFor="let item of edit_consultationlist | keyvalue" class="mx-2 mb-2">

            <nb-card class="container m-0 ">

                <div class="row" style="font-size: 12px;">
                    <div class="col-lg-4 col-md-4 col-sm-12 consultblock">
                        <div *ngFor="let day of days  ">
                            <div class="days {{ item.value.days.includes(day.fname)?'selected':''}} "
                                (click)="edittoggleconsult(day.fname,item.key,'days')">{{day.name}}</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12 consultblock">
                        <input type="time" class="form-control  consultinput" [(ngModel)]="item.value.startTime"
                            id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="10:00">
                        <input type="time" class="form-control consultinput" [(ngModel)]="item.value.endTime"
                            id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="22:00">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-12 consultblock">
                        <div *ngFor="let atype of avaliableMode  ">
                            <div class="consulttype  {{ item.value.avaliableMode.includes(atype.name)?'selected':''}} "
                                (click)="edittoggleconsult(atype.name,item.key,'avaliableMode')"><i
                                    class=" {{atype.icon}}"></i></div>
                        </div>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-12 consultblock">
                        <div class="consulttype material-icons delete" (click)="edit_removeConfigBlock(item.key)">delete
                        </div>
                    </div>
                </div>


            </nb-card>
        </div>
    </nb-card>
        </div>
        <footer id="modal-footer " class="d-flex justify-content-end  mt-1">
            <button id="modal-action-button" class="btn btn-sm button_action" type="button" (click)="editopenModal()">
                Update Enroll Doctor
            </button>
            <button class="btn btn-md button_cancel btn-sm" type="button" id="modal-cancel-button"
                (click)="showhideboxeditcancel()">
                Cancel
            </button>
        </footer>
    </div>


    <div class="col col-lg col-md col-sm m-0 p-0 d-flex justify-content-center align-items-center table-scroll">
        <table mat-table [dataSource]="dataSource" matSort class="table-view">
            <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef class="table-head"> Sl.No. </th>
                <td mat-cell *matCellDef="let element; let i=index;"> {{i+1}} </td>
            </ng-container>
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef class="table-head"> Doctor Name </th>
                <td mat-cell *matCellDef="let element">{{element.doctor.name.first}} </td>
            </ng-container>
            <ng-container matColumnDef="hospitalName">
                <th mat-header-cell *matHeaderCellDef class="table-head"> Specialization </th>
                <td mat-cell *matCellDef="let element">{{element.doctor.specializations[0].name}} </td>
            </ng-container>

            <!-- <ng-container matColumnDef="branches">
                <th mat-header-cell *matHeaderCellDef class="table-head"> Slot Time </th>
                <td mat-cell *matCellDef="let element">30 </td>
            </ng-container> -->

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef class="table-head">Action</th>
                <!-- <td mat-cell *matCellDef="let element"> {{element.status || "Active"}} </td> -->
                <td mat-cell *matCellDef="let element" style="text-align: center;">
                    <span class="edit text-center m-auto">
                      <i class="far fa-edit  btn btn-primary text-center p-1 btn-sm mx-1" aria-hidden="true"
                        (click)="showhideboxedit(element)" style="font-size: 12px;"></i>
                      <i class="fas fa-trash  btn btn-danger text-center btn-sm p-1 mx-1"
                         (click)="deleteModalpopup(element)" aria-hidden="true"
                        style="font-size: 12px;"></i>
                    </span>
                    <!-- (click)="removeLanguage(element.name)" (click)="deleteModalpopup(element.name)"
                      aria-hidden="true"></i></span> -->
                  </td>
            </ng-container>

            <!-- <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="table-head">Edit</th>
            <td mat-cell *matCellDef="let element of displayedColumns">
              <span class="edit d-flex flex-direction-row justify-content-spacearound align-items-center">
                <i class="fa fa-eye btn btn-success btn-sm mx-1" 
                (click)="editdpctor(element)" aria-hidden="true"
                  style="font-size: 12px;"></i>
                <i class="fa fa-plus btn btn-primary btn-sm mx-1" 
                (click)="editdpctor(element)" aria-hidden="true"
                  style="font-size: 12px;"></i>
              </span>
            </td>
          </ng-container> -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <!-- Angular 8 pagination -->
    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]">
    </mat-paginator>
    <!-- <div class="row">
        <div class="col mt-2 mb-3 mr-3">
            <button type="submit" class="btn btn-primary btn-sm  float-right">Submit</button>
        </div>
    </div> -->
</div>


<div class="popup {{overlap ?'pshow':''}}">
    <div class="centerbox">
      <div class="pclose" ><i class="fa fa-times " style="font-size: 20px;"></i></div>
      <section class="mx-2 mb-2 mt-2">
        <div class="col d-flex justify-content-center align-items-center p-0 m-0">
          <h5 class="p-0 m-0 mb-2">Alert</h5>
        </div>
  
        <span style="padding-left: 20px;">Genarting Slot for selected time and day overlap!</span> 
      </section>
      <footer id="modal-footer" class="col-12 mb-2 d-flex justify-content-center align-items-center">
       
        <div class="col m-0 p-0 px-3">
  
          <button type="button" class="btn btn-sm " (click)="removeoverlap()" id="modal-action-button">
            Ok
          </button>
          
          
        </div>
  
        
      </footer>
    </div>
  </div>